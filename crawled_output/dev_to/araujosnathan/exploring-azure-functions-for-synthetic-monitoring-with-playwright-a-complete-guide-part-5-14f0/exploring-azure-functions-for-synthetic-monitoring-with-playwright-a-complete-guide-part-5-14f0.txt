Exploring Azure Functions for Synthetic Monitoring with Playwright: A Complete Guide - Part 5 - DEV Community
Forem Feed
Follow new Subforems to improve your feed
DEV Community
Follow
A space to discuss and keep up software development and manage your software career
Gamers Forem
Follow
An inclusive community for gaming enthusiasts
Future
Follow
News and discussion of science and technology such as AI, VR, cryptocurrency, quantum computing, and more.
Music Forem
Follow
From composing and gigging to gear, hot music takes, and everything in between.
DUMB DEV Community
Follow
Memes and software development shitposting
Vibe Coding Forem
Follow
Discussing AI software development, and showing off what we're building.
Popcorn Movies and TV
Follow
Movie and TV enthusiasm, criticism and everything in-between.
Design Community
Follow
Web design, graphic design and everything in-between
Maker Forem
Follow
A community for makers, hobbyists, and professionals to discuss Arduino, Raspberry Pi, 3D printing, and much more.
Scale Forem
Follow
For engineers building software at scale. We discuss architecture, cloud-native, and SRE‚Äîthe hard-won lessons you can't just Google
Forem Core
Follow
Discussing the core forem open source software project ‚Äî features, bugs, performance, self-hosting.
Security Forem
Follow
Your central hub for all things security. From ethical hacking and CTFs to GRC and career development, for beginners and pros alike
Open Forem
Follow
A general discussion space for the Forem community. If it doesn't have a home elsewhere, it belongs here
Crypto Forem
Follow
A collaborative community for all things Crypto‚Äîfrom Bitcoin to protocol development and DeFi to NFTs and market analysis.
Dropdown menu
Dropdown menu
Skip to content
Navigation menu
Search
Powered by Algolia
Search
Log in
Create account
DEV Community
Close
Add reaction
Like
Unicorn
Exploding Head
Raised Hands
Fire
Jump to Comments
Save
Boost
More...
Moderate
Copy link
Copy link
Copied to Clipboard
Share to X
Share to LinkedIn
Share to Facebook
Share to Mastodon
Report Abuse
Nathan Ara√∫jo
Posted on Sep 15
Exploring Azure Functions for Synthetic Monitoring with Playwright: A Complete Guide - Part 5
#monitoring
#serverless
#testing
#azure
Over the past few days, I‚Äôve been diving into using Azure Functions to implement synthetic monitoring with Playwright. The goal was simple: run browser automation tests every 30 minutes or 1 hour to monitor critical system functionalities. However, as with many cloud adventures, there were some surprises along the way.
1. Choosing the Right Plan
The first dilemma was: Consumption Plan or Premium Plan?
The Consumption Plan is cheap but does not support running browsers like Playwright because of strict sandbox limitations.
The Premium Plan eliminates cold starts, offers dedicated CPU/RAM, and allows running browsers ‚Äî essential for automation tasks.
Within the Premium Plan, there are different SKUs: EP1, EP2, and EP3. For a proof of concept (POC) running tests every 30 minutes or 1 hour, EP1 (1 vCPU / 3.5 GB RAM) is enough and much cheaper (~$130‚Äì150/month). Heavier workloads require EP2 or EP3 with more CPU and memory.
I opted for EP1. This ensures Playwright runs stably, even when opening headless browsers.
2. Deployment Structure and ‚ÄúNo Functions Found‚Äù
Initially, I deployed my Function App via .zip using Azure Pipeline and Release, including dist/, host.json, and other project folders. However, the logs showed:
0 functions found
I discovered that Azure Functions requires the function folder to be at the root of the deployment or correctly configured. In modern Functions (v4, JavaScript/TypeScript), each function file must use @azure/functions and host.json needs to be at the root.
To maintain my project structure (dist/functions, dist/support, dist/tests), the solution was to point the deployment to the root of dist and ensure host.json and .js function files were correctly located.
3. Playwright and Browsers
One of the biggest challenges was running Playwright on Azure.
Chromium works fine ‚úÖ
Firefox and WebKit fail ‚ùå
Typical error:
Error: browserType.launch: spawn UNKNOWN
This happens because the Azure Functions Windows sandbox doesn‚Äôt provide all system dependencies Firefox/WebKit require.
Possible Solutions:
Use Chromium only ‚Äì works reliably and is sufficient for synthetic monitoring.
Deploy via Linux Function App + --with-deps ‚Äì installs necessary system libraries.
Custom Container ‚Äì a Docker image based on mcr.microsoft.com/playwright comes with Chromium, Firefox, and WebKit pre-installed with dependencies. This is ideal for production.
4. Environment Variables and Paths
To make Playwright locate the browser, I had to set:
PLAYWRIGHT_BROWSERS_PATH = 0
This ensures the Azure Function looks for browsers in the correct location in node_modules. If you install browsers in the pipeline with npx playwright install chromium, the node_modules folder must be included all browsers that you need and with PLAYWRIGHT_BROWSERS_PATH = 0 Playwright will look at for the right location.
Conclusion
After going through all of this, I finally succeeded in getting the Azure Function TimerTrigger to run reliably. The execution traces were sent to Application Insights, allowing me to monitor each run in real time. Additionally, the errors that occurred during the tests helped me realize that the reports were being stored in Azure Blob Storage, providing a reliable way to analyze test results and gain insights for further improvements.
Additional Resources
Azure Functions Documentation
Playwright Documentation
Application Insights Documentation
Azure Blob Storage Documentation
Synthetic Monitoring - Microsoft Blog
My Github Project - synthetic-monitoring-tests
Top comments (0)
Subscribe
Personal
Trusted User
Create template
Templates let you quickly answer FAQs or store snippets for re-use.
Submit
Preview
Dismiss
Code of Conduct
‚Ä¢
Report abuse
Are you sure you want to hide this comment? It will become hidden in your post, but will still be visible via the comment's permalink.
Hide child comments as well
Confirm
For further actions, you may consider blocking this person and/or reporting abuse
Nathan Ara√∫jo
Follow
A little of quality in your days, yeah?!
Hey, I am Nathan, Quality Engineer!
Joined
Apr 26, 2024
More from Nathan Ara√∫jo
Exploring Azure Functions for Synthetic Monitoring with Playwright: A Complete Guide - Part 4
#monitoring
#serverless
#testing
#azure
Exploring Azure Functions for Synthetic Monitoring with Playwright: A Complete Guide - Part 3
#monitoring
#serverless
#testing
#azure
Exploring Azure Functions for Synthetic Monitoring with Playwright: A Complete Guide - Part 1
#monitoring
#serverless
#testing
#azure
üíé DEV Diamond Sponsors
Thank you to our Diamond Sponsors for supporting the DEV Community
Google AI is the official AI Model and Platform Partner of DEV
Neon is the official database partner of DEV
Algolia is the official search partner of DEV
DEV Community ‚Äî A space to discuss and keep up software development and manage your software career
Home
DEV++
Welcome Thread
Reading List
Podcasts
Videos
Tags
DEV Education Tracks
DEV Challenges
DEV Help
Advertise on DEV
DEV Showcase
About
Contact
Free Postgres Database
Software comparisons
Forem Shop
Code of Conduct
Privacy Policy
Terms of Use
Built on Forem ‚Äî the open source software that powers DEV and other inclusive communities.
Made with love and Ruby on Rails. DEV Community ¬© 2016 - 2025.
We're a place where coders share, stay up-to-date and grow their careers.
Log in
Create account