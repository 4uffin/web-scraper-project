Completing Your Local OCI Lab: A Guide to Port Forwarding in UTM - DEV Community
Forem Feed
Follow new Subforems to improve your feed
DEV Community
Follow
A space to discuss and keep up software development and manage your software career
Gamers Forem
Follow
An inclusive community for gaming enthusiasts
Future
Follow
News and discussion of science and technology such as AI, VR, cryptocurrency, quantum computing, and more.
Music Forem
Follow
From composing and gigging to gear, hot music takes, and everything in between.
DUMB DEV Community
Follow
Memes and software development shitposting
Vibe Coding Forem
Follow
Discussing AI software development, and showing off what we're building.
Popcorn Movies and TV
Follow
Movie and TV enthusiasm, criticism and everything in-between.
Design Community
Follow
Web design, graphic design and everything in-between
Maker Forem
Follow
A community for makers, hobbyists, and professionals to discuss Arduino, Raspberry Pi, 3D printing, and much more.
Scale Forem
Follow
For engineers building software at scale. We discuss architecture, cloud-native, and SRE‚Äîthe hard-won lessons you can't just Google
Forem Core
Follow
Discussing the core forem open source software project ‚Äî features, bugs, performance, self-hosting.
Security Forem
Follow
Your central hub for all things security. From ethical hacking and CTFs to GRC and career development, for beginners and pros alike
Crypto Forem
Follow
A collaborative community for all things Crypto‚Äîfrom Bitcoin to protocol development and DeFi to NFTs and market analysis.
Open Forem
Follow
A general discussion space for the Forem community. If it doesn't have a home elsewhere, it belongs here
Dropdown menu
Dropdown menu
Skip to content
Navigation menu
Search
Powered by Algolia
Search
Log in
Create account
DEV Community
Close
Add reaction
Like
Unicorn
Exploding Head
Raised Hands
Fire
Jump to Comments
Save
Boost
More...
Moderate
Copy link
Copy link
Copied to Clipboard
Share to X
Share to LinkedIn
Share to Facebook
Share to Mastodon
Report Abuse
Smyekh David-West
Posted on Sep 18
Completing Your Local OCI Lab: A Guide to Port Forwarding in UTM
#utm
#networking
#ssh
#oci
Building a Local Lab for OCI Development (3 Part Series)
1
The OCI Developer's Local Lab: A Guide to Setting Up an Ubuntu VM on Your Mac
2
The OCI Developer's Workflow: Bridging Your Mac and Local VM with a Shared Folder
3
Completing Your Local OCI Lab: A Guide to Port Forwarding in UTM
‚òÅÔ∏è Pre-Flight Checklist
This is a connecting flight. Before we taxi down the runway, here‚Äôs your flight plan. Keep this handy to navigate your flight path.
Welcome aboard the cloud! ‚òÅÔ∏è
üå•Ô∏è Takeoff
Why You Need Port Forwarding
‚õÖÔ∏è Cruising Altitude
How to Set Up Port Forwarding in UTM (macOS + Linux VM)
How Port Forwarding Relates to OCI Networking
üå§Ô∏è Landing & Taxi
Conclusion
Enjoy your flight! ‚òÅÔ∏è
So far in our series, we've built a local, production-like Ubuntu VM and bridged it to our Mac with a shared folder. We have a clean environment and a seamless coding workflow. Now, we face the final hurdle: networking.
You've written a web application, and you're running it inside the VM. How do you test its API from your Mac? How do you debug the frontend in your browser? By default, the VM is a black box.
This is where port forwarding comes in. It‚Äôs not just a local convenience; it‚Äôs a fundamental skill that helps you understand and debug one of the most critical components of OCI: Security Lists and Network Security Groups (NSGs). This guide will show you how to configure port forwarding in UTM to complete your local OCI lab.
Why You Need Port Forwarding
UTM's default Shared Network mode acts like a home router for your VM. It uses Network Address Translation (NAT) to give your VM internet access while hiding it behind a virtual firewall. This is great for isolation, but it means your Mac can't directly see the services (or "ports") that your VM opens.
Port forwarding is like creating a special rule on that virtual router. It tells UTM, "Any traffic that arrives at this specific port on my Mac should be forwarded directly to that specific port inside my VM."
You need it to:
Access a web server in the VM from your Mac's browser.
SSH into your VM from your Mac's terminal.
Connect to a database or API running in the VM.
Develop with frameworks like React, Flask, or FastAPI inside the VM and view the results on your Mac.
How to Set Up Port Forwarding in UTM (macOS + Linux VM)
In these steps, I‚Äôll show you exactly how to set up port forwarding in UTM, test it with a simple Python web server, and troubleshoot common issues.
Step 1: Configure Port Forwarding in UTM
Make sure the VM is powered off before making network changes. Port forwarding changes can‚Äôt be made while the VM is running.
Step 2: Open UTM and Select Your VM
Launch UTM.
In the main UTM window, select your Ubuntu VM from the list on the
left.
Right-click and select the edit option to open the VM's configuration.
Step 3: Configure the Network
1. In the ‚ÄúNetwork‚Äù tab:
2. Set Network Mode to Emulated VLAN (Shared Network) (sometimes labelled as ‚ÄúNAT‚Äù). Once you do that, a Port Forward option will appear below Network
3. Add a Port Forwarding Rule:
Click New and then set:
Field
Example
Protocol
TCP
Host Address for localhost access) or leave blank for all interfaces.
127.0.0.1
Host Port (Port on your Mac)
8080 (or any open port)
Guest Address (IP of the VM)
use 10.0.2.15 or just leave blank to auto-select
Guest Port (Port on the VM)
80 (or your app‚Äôs port)
Example: Forward Mac‚Äôs localhost:8080 ‚Üí VM‚Äôs port 80 (where a web server will run).
Use the top labels at the top (i.e., Protocol, Guest Address, Guest Port) to guide you for your entries.
Then save
Step 4: Run a Web Server Inside the VM
Boot into your Linux VM and run:
Install Python (if needed):
sudo apt update
sudo apt install python3 -y
Enter fullscreen mode
Exit fullscreen mode
Start a test HTTP server:
sudo python3 -m http.server 80
Enter fullscreen mode
Exit fullscreen mode
Note: Port 80 requires sudo. You can also use python3 -m http.server 8080 and adjust the port forwarding accordingly.
Step 5: Test from macOS
From your Mac Terminal, run:
curl http://localhost:8080
Enter fullscreen mode
Exit fullscreen mode
You should see an HTML directory listing from the VM ‚Äî success! Your Mac connected to the VM‚Äôs internal web server via localhost:8080, routed through UTM‚Äôs NAT ‚Äî exactly as intended.
If you curl http://localhost:8080 from your Mac without starting the test server, you get curl: (56) Recv failure: Connection reset by peer.
Why You‚Äôre Seeing a Directory Listing
That‚Äôs the default behaviour of:
python3 -m http.server 80
Enter fullscreen mode
Exit fullscreen mode
It serves the current directory‚Äôs contents over HTTP. Since you‚Äôre likely in / (the root directory) and there are no files there (or permissions restrict listing), the <ul> is empty.
Troubleshooting Summary
Problem
Fix
curl: (7) Failed to connect
Ensure the VM server is running and port forwarding is saved
PermissionError: [Errno 13]
Use sudo for ports below 1024
Nothing shows in the browser.
Try forwarding to guest port 8080 instead of 80
Bonus: Forward Other Services
Service
Guest Port
Host Port
Notes
SSH
22
2222
ssh user@localhost -p 2222
Flask app
5000
5000
Run with host='0.0.0.0'
JupyterLab
8888
8888
Run with Jupyter Lab --ip=0.0.0.0.
FastAPI
8000
8000
Run with uvicorn app:app --host 0.0.0.0 --port 8000
React (Vite)
5173
5173
Run with npm run dev or vite --host (or set "host": true in config)
React (CRA)
3000
3000
npm start ‚Äî override with .env: HOST=0.0.0.0 if needed
With port forwarding configured, your VM is no longer an isolated box. It's a fully integrated, powerful, and safe extension of your local development environment.
How Port Forwarding Relates to OCI Networking
In OCI, nothing is accessible to the outside world unless you explicitly open a port in a Security List or NSG. Getting a "connection timed out" error because a firewall rule is missing is one of the most common issues developers face.
Port forwarding in UTM is the local equivalent of an OCI ingress rule.
The Problem: Your service is running, but you can't connect.
The OCI Solution: You add an ingress rule to your VCN's Security List for the destination port (e.g., allow TCP traffic on port 443 from source 0.0.0.0/0).
The Local VM Solution: You add a port forwarding rule in UTM (e.g., forward host port 8443 to guest port 443).
By practising this locally, you build the muscle memory for cloud networking. You learn to think about which ports your application needs and how to expose them, dramatically speeding up your debugging process when you deploy to a real OCI environment. It turns an abstract networking rule into a tangible, hands-on concept.
Conclusion
With port forwarding configured, your local lab is complete. You have successfully built an isolated, production-mirroring environment that you can code in and network with, all from the comfort of your Mac.
This three-part journey of setting up the VM, creating a shared folder, and configuring port forwarding was about more than just tools. It was about adopting the workflow of a professional cloud engineer. The initial effort to build this environment pays for itself tenfold in saved time, fewer errors in production, and a deeper understanding of how cloud infrastructure truly works. You've eliminated "it works on my machine" from your vocabulary for good.
Cover Photo by BoliviaInteligente on Unsplash
Building a Local Lab for OCI Development (3 Part Series)
1
The OCI Developer's Local Lab: A Guide to Setting Up an Ubuntu VM on Your Mac
2
The OCI Developer's Workflow: Bridging Your Mac and Local VM with a Shared Folder
3
Completing Your Local OCI Lab: A Guide to Port Forwarding in UTM
Top comments (0)
Subscribe
Personal
Trusted User
Create template
Templates let you quickly answer FAQs or store snippets for re-use.
Submit
Preview
Dismiss
Code of Conduct
‚Ä¢
Report abuse
Are you sure you want to hide this comment? It will become hidden in your post, but will still be visible via the comment's permalink.
Hide child comments as well
Confirm
For further actions, you may consider blocking this person and/or reporting abuse
Smyekh David-West
Follow
Product t(h)inker. A firm believer in Gall's Law: start simple.
Education
University of Aberdeen, University of Tampa
Joined
Mar 6, 2025
More from Smyekh David-West
The OCI Developer's Workflow: Bridging Your Mac and Local VM with a Shared Folder
#utm
#virtualisation
#devops
#ubuntu
The OCI Developer's Local Lab: A Guide to Setting Up an Ubuntu VM on Your Mac
#cloud
#devops
#oci
#ubuntu
The Cloud Isn't Magic, It's a Metaphor: From VMs to Kubernetes on OCI
#oci
#cloud
#devops
#architecture
üíé DEV Diamond Sponsors
Thank you to our Diamond Sponsors for supporting the DEV Community
Google AI is the official AI Model and Platform Partner of DEV
Neon is the official database partner of DEV
Algolia is the official search partner of DEV
DEV Community ‚Äî A space to discuss and keep up software development and manage your software career
Home
Tags
About
Contact
Code of Conduct
Privacy Policy
Terms of Use
Built on Forem ‚Äî the open source software that powers DEV and other inclusive communities.
Made with love and Ruby on Rails. DEV Community ¬© 2016 - 2025.
We're a place where coders share, stay up-to-date and grow their careers.
Log in
Create account