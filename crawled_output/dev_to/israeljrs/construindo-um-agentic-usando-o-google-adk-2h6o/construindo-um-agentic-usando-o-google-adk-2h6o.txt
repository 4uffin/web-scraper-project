Construindo um Agentic usando o google ADK - DEV Community
Forem Feed
Follow new Subforems to improve your feed
DEV Community
Follow
A space to discuss and keep up software development and manage your software career
Gamers Forem
Follow
An inclusive community for gaming enthusiasts
Future
Follow
News and discussion of science and technology such as AI, VR, cryptocurrency, quantum computing, and more.
Music Forem
Follow
From composing and gigging to gear, hot music takes, and everything in between.
DUMB DEV Community
Follow
Memes and software development shitposting
Vibe Coding Forem
Follow
Discussing AI software development, and showing off what we're building.
Popcorn Movies and TV
Follow
Movie and TV enthusiasm, criticism and everything in-between.
Design Community
Follow
Web design, graphic design and everything in-between
Maker Forem
Follow
A community for makers, hobbyists, and professionals to discuss Arduino, Raspberry Pi, 3D printing, and much more.
Scale Forem
Follow
For engineers building software at scale. We discuss architecture, cloud-native, and SRE‚Äîthe hard-won lessons you can't just Google
Forem Core
Follow
Discussing the core forem open source software project ‚Äî features, bugs, performance, self-hosting.
Security Forem
Follow
Your central hub for all things security. From ethical hacking and CTFs to GRC and career development, for beginners and pros alike
Open Forem
Follow
A general discussion space for the Forem community. If it doesn't have a home elsewhere, it belongs here
Crypto Forem
Follow
A collaborative community for all things Crypto‚Äîfrom Bitcoin to protocol development and DeFi to NFTs and market analysis.
Dropdown menu
Dropdown menu
Skip to content
Navigation menu
Search
Powered by Algolia
Search
Log in
Create account
DEV Community
Close
Add reaction
Like
Unicorn
Exploding Head
Raised Hands
Fire
Jump to Comments
Save
Boost
More...
Moderate
Copy link
Copy link
Copied to Clipboard
Share to X
Share to LinkedIn
Share to Facebook
Share to Mastodon
Report Abuse
Israel Junior
Posted on Sep 22
Construindo um Agentic usando o google ADK
#adk
#agentic
#python
Resumo
Este artigo apresenta um agente constru√≠do com o Google ADK (Agent Development Kit) que consulta cota√ß√µes de a√ß√µes via YFinance. O agente exp√µe a ferramenta fetch_stock_info para responder perguntas sobre pre√ßo atual, m√≠nima/m√°xima do dia e recomenda√ß√£o, usando o modelo Gemini. Abaixo est√£o a arquitetura, o passo a passo de configura√ß√£o e execu√ß√£o, al√©m de ideias de evolu√ß√£o.
Por que este projeto
Acessar cota√ß√µes de forma conversacional com contexto.
Integrar modelos Gemini a uma fonte de dados pr√°tica (Yahoo Finance via YFinance).
Demonstrar como publicar ferramentas Python em um agente com o Google ADK.
Arquitetura
Agente: query_yfinance_agent (modelo gemini-2.0-flash), definido em query-yfinance/agent.py.
Ferramenta: fetch_stock_info(ticker_symbol: str), que usa yfinance para buscar:
displayName (ou shortName)
currentPrice
dayLow
dayHigh
recommendationKey
Orquestra√ß√£o: Google ADK aciona o modelo e decide quando chamar a ferramenta com base no prompt do usu√°rio.
Configura√ß√£o: vari√°veis em query-yfinance/.env (carregadas automaticamente pelo ADK).
C√≥digo-chave
Arquivo query-yfinance/agent.py:
Ferramenta de consulta:
Recebe ticker_symbol (ex.: PETR4.SA, AAPL).
Usa yfinance.Ticker(...).info e retorna um dicion√°rio com campos √∫teis.
Agente ADK:
Define name, model, description e instruction.
Registra a ferramenta em tools=[fetch_stock_info].
Pr√©-requisitos
Python >= 3.12.
Chave de API do Google Generative AI (para a API p√∫blica): vari√°vel GOOGLE_API_KEY.
Opcional: Vertex AI (com GOOGLE_GENAI_USE_VERTEXAI=TRUE + credenciais GCP).
Instala√ß√£o
Com uv (recomendado):
Instale o uv: https://docs.astral.sh/uv/
No diret√≥rio do projeto, rode uv sync.
Ative o ambiente: source .venv/bin/activate.
Com pip:
Crie e ative o venv: python3.12 -m venv .venv && source .venv/bin/activate
Atualize o pip: pip install -U pip
Instale o projeto: pip install -e .
As depend√™ncias principais est√£o em pyproject.toml: google-adk e yfinance.
Configura√ß√£o
Copie o exemplo de vari√°veis: cp query-yfinance/.env-sample query-yfinance/.env
Edite query-yfinance/.env:
GOOGLE_API_KEY=... (quando n√£o usa Vertex)
GOOGLE_GENAI_USE_VERTEXAI=FALSE (ou TRUE + gcloud auth application-default login + exporte GOOGLE_CLOUD_PROJECT e GOOGLE_CLOUD_REGION)
Observa√ß√£o: o ADK l√™ o .env da pasta do agente; mantenha-o em query-yfinance/.
Execu√ß√£o (CLI)
Ative o venv.
Rode adk run query-yfinance.
Exemplos de perguntas:
‚ÄúQual o pre√ßo atual de PETR4.SA?‚Äù
‚ÄúMostre a m√≠nima e a m√°xima do dia para AAPL.‚Äù
Exemplos de tickers:
Brasil (B3): PETR4.SA, VALE3.SA (note o sufixo .SA).
EUA: AAPL, GOOGL, MSFT.
Fluxo em tempo de execu√ß√£o
Voc√™ conversa com o agente no terminal.
O modelo Gemini interpreta a inten√ß√£o e decide chamar fetch_stock_info com o ticker.
A ferramenta usa YFinance e retorna os campos.
O agente comp√µe uma resposta natural com os dados retornados.
Tratamento de erros e limita√ß√µes
Ticker inv√°lido: YFinance pode retornar dados incompletos; o agente ainda responde com o nome/ticker fornecido.
Campos ausentes: nem todos os ativos possuem currentPrice/recommendationKey; o c√≥digo j√° lida com dict vazio.
Rede/limites: YFinance depende do Yahoo Finance e pode falhar temporariamente; tente novamente.
Precis√£o e atraso: dados s√£o de terceiros e podem ter lat√™ncia; valide antes de decis√µes financeiras.
Estrutura do reposit√≥rio
query-yfinance/agent.py: agente e ferramenta fetch_stock_info.
query-yfinance/.env-sample: exemplo de vari√°veis.
README.md: guia r√°pido.
pyproject.toml: metadados e depend√™ncias.
Conclus√£o
Com poucas linhas de c√≥digo e o Google ADK, integramos um modelo Gemini a uma fonte de dados financeira pr√°tica (YFinance), criando um agente conversacional que responde consultas de mercado. A abordagem √© extens√≠vel: novas ferramentas podem ser adicionadas para enriquecer an√°lises, hist√≥rico e formata√ß√£o de relat√≥rios.
Source
Sample Code google adk yfinance
Top comments (0)
Subscribe
Personal
Trusted User
Create template
Templates let you quickly answer FAQs or store snippets for re-use.
Submit
Preview
Dismiss
Code of Conduct
‚Ä¢
Report abuse
Are you sure you want to hide this comment? It will become hidden in your post, but will still be visible via the comment's permalink.
Hide child comments as well
Confirm
For further actions, you may consider blocking this person and/or reporting abuse
Israel Junior
Follow
Joined
Dec 8, 2018
More from Israel Junior
BaseModel vs DataClass no Python
#python
üíé DEV Diamond Sponsors
Thank you to our Diamond Sponsors for supporting the DEV Community
Google AI is the official AI Model and Platform Partner of DEV
Neon is the official database partner of DEV
Algolia is the official search partner of DEV
DEV Community ‚Äî A space to discuss and keep up software development and manage your software career
P√°gina Inicial
DEV++
Welcome Thread
Podcasts
Videos
Tags
DEV Education Tracks
DEV Challenges
DEV Help
Advertise on DEV
DEV Showcase
Sobre
Contato
Free Postgres Database
Software comparisons
Forem Shop
C√≥digo de Conduta
Pol√≠tica de Privacidade
Termos de Uso
Built on Forem ‚Äî the open source software that powers DEV and other inclusive communities.
Made with love and Ruby on Rails. DEV Community ¬© 2016 - 2025.
We're a place where coders share, stay up-to-date and grow their careers.
Log in
Create account