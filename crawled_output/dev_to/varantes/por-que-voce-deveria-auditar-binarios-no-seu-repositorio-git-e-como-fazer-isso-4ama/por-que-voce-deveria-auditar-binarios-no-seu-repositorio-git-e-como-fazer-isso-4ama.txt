Por que voc√™ deveria auditar bin√°rios no seu reposit√≥rio Git (e como fazer isso) - DEV Community
Forem Feed
Follow new Subforems to improve your feed
DEV Community
Follow
A space to discuss and keep up software development and manage your software career
Gamers Forem
Follow
An inclusive community for gaming enthusiasts
Future
Follow
News and discussion of science and technology such as AI, VR, cryptocurrency, quantum computing, and more.
Music Forem
Follow
From composing and gigging to gear, hot music takes, and everything in between.
Vibe Coding Forem
Follow
Discussing AI software development, and showing off what we're building.
DUMB DEV Community
Follow
Memes and software development shitposting
Popcorn Movies and TV
Follow
Movie and TV enthusiasm, criticism and everything in-between.
Design Community
Follow
Web design, graphic design and everything in-between
Maker Forem
Follow
A community for makers, hobbyists, and professionals to discuss Arduino, Raspberry Pi, 3D printing, and much more.
Scale Forem
Follow
For engineers building software at scale. We discuss architecture, cloud-native, and SRE‚Äîthe hard-won lessons you can't just Google
Forem Core
Follow
Discussing the core forem open source software project ‚Äî features, bugs, performance, self-hosting.
Security Forem
Follow
Your central hub for all things security. From ethical hacking and CTFs to GRC and career development, for beginners and pros alike
Open Forem
Follow
A general discussion space for the Forem community. If it doesn't have a home elsewhere, it belongs here
Crypto Forem
Follow
A collaborative community for all things Crypto‚Äîfrom Bitcoin to protocol development and DeFi to NFTs and market analysis.
Dropdown menu
Dropdown menu
Skip to content
Navigation menu
Search
Powered by Algolia
Search
Log in
Create account
DEV Community
Close
Add reaction
Like
Unicorn
Exploding Head
Raised Hands
Fire
Jump to Comments
Save
Boost
More...
Moderate
Copy link
Copy link
Copied to Clipboard
Share to X
Share to LinkedIn
Share to Facebook
Share to Mastodon
Report Abuse
Valdemar Arantes Neto
Posted on Sep 24
Por que voc√™ deveria auditar bin√°rios no seu reposit√≥rio Git (e como fazer isso)
#architecture
#devops
#git
O problema que me motivou
Como arquiteto de software, estou iniciando um levantamento de espa√ßo em disco ocupado por arquivos indevidamente versionados no Bitbucket da empresa. N√£o estou falando de senhas ou chaves de API ‚Äî esses s√£o problemas √≥bvios. Estou falando de bin√°rios como DLLs, arquivos .so, execut√°veis e at√© bibliotecas como jquery.js commitadas diretamente no reposit√≥rio.
Antes de iniciar o trabalho pr√°tico, precisei construir o embasamento t√©cnico para justificar o esfor√ßo. Este artigo documenta a pesquisa que realizei para fundamentar essa decis√£o ‚Äî e que pode ser √∫til para outros que enfrentam situa√ß√£o similar.
Vale a pena fazer o levantamento?
Na maioria dos casos, sim ‚Äî mas com nuances importantes.
O esfor√ßo de identificar e remover bin√°rios pode trazer ganhos significativos em performance, custo e manutenibilidade. Por√©m, h√° cen√°rios espec√≠ficos onde o versionamento de bin√°rios pode ser aceit√°vel ou at√© necess√°rio.
Efici√™ncia e Performance
Impacto t√©cnico:
Cada vers√£o de um bin√°rio cria um novo blob completo no hist√≥rico
Git n√£o faz delta compression eficiente em bin√°rios
Opera√ß√µes (clone, fetch, push) ficam proporcionalmente mais lentas
Exemplo mensur√°vel:
Bin√°rio de 50MB versionado 20 vezes ‚Üí ~1GB de hist√≥rico adicional
git clone que levaria 30s pode passar para v√°rios minutos
Em equipes de 20+ pessoas, isso representa horas de tempo perdido por m√™s
Casos documentados na literatura: reposit√≥rios com bin√°rios no hist√≥rico frequentemente apresentam degrada√ß√£o significativa. Um reposit√≥rio de microservi√ßo com JARs de depend√™ncias commitados pode facilmente atingir 800MB, sendo 600MB apenas de bin√°rios ‚Äî impactando o tempo de clone de forma desproporcional.
Custo de Storage
Impactos diretos:
Bitbucket Cloud: limites de 4GB por reposit√≥rio (planos gratuitos)
Servidores self-hosted: custo de storage cresce indefinidamente
CI/CD: checkout mais lento aumenta tempo e custo de builds
Exemplo pr√°tico:
Um reposit√≥rio com 500MB de bin√°rios no hist√≥rico pode custar 10-15min extras por build em CI/CD
Em 100 builds/dia = ~25 horas/m√™s de tempo desperdi√ßado de m√°quina
Manutenibilidade
Problemas concretos:
Bin√°rios n√£o produzem diffs leg√≠veis para code review
Conflitos s√£o irrecuper√°veis (binary merge conflicts = escolher uma vers√£o)
Bibliotecas de terceiros (jquery.js) devem vir de package managers
Quando bin√°rios no Git podem ser aceit√°veis
Cen√°rios v√°lidos:
Bin√°rios pequenos (<100KB) e raramente modificados
Bootstrap essencial: ferramentas m√≠nimas para setup inicial do projeto
Compliance regulat√≥rio: artefatos imut√°veis exigidos para auditoria (financeiro, sa√∫de)
Projetos isolados: poucos colaboradores, baixa frequ√™ncia de altera√ß√£o
Trade-offs a considerar:
Reposit√≥rios pequenos (<50MB total) com equipe reduzida (<5 pessoas): impacto pode ser marginal
Custos de migra√ß√£o vs. benef√≠cios: avaliar se o esfor√ßo justifica os ganhos
Alternativas e suas limita√ß√µes
Git LFS (Large File Storage)
Adequado para: assets de m√≠dia, datasets, arquivos grandes inevit√°veis
Limita√ß√µes:
Requer configura√ß√£o adicional no servidor
Adiciona complexidade ao workflow (git lfs install, git lfs track, git lfs pull)
Nem todo Bitbucket Cloud oferece suporte ilimitado
Equipe precisa treinar novo fluxo de trabalho
Package Managers
Recomendado para: depend√™ncias de terceiros
JavaScript: npm, yarn, pnpm
Java: maven, gradle
Python: pip, poetry
C++: conan, vcpkg
Artifact Repositories
Adequado para: builds, releases, bibliotecas internas
Artifactory, Nexus, Google Artifact Registry
Integra√ß√£o nativa com CI/CD
Controle de vers√£o, seguran√ßa e auditoria
Vantagem sobre Git LFS: melhor para pipelines automatizados
Abordagem comum: migrar bin√°rios de build para reposit√≥rios especializados (como Nexus) e configurar ferramentas de build (Maven, Gradle) para baix√°-los automaticamente pode eliminar centenas de MB de reposit√≥rios cr√≠ticos.
Container Registries
Adequado para: bin√°rios empacotados em imagens Docker
Docker Hub, Google Container Registry, Amazon ECR
Versionamento via tags de imagem
Ideal para deploys containerizados
Como identificar arquivos problem√°ticos
Comando para listar maiores blobs:
git rev-list --objects --all |
git cat-file --batch-check='%(objecttype) %(objectname) %(objectsize) %(rest)' |
awk '/^blob/ {print $3, $2, $4}' |
sort -rn |
head -20
Enter fullscreen mode
Exit fullscreen mode
Ferramentas especializadas:
# An√°lise completa do reposit√≥rio
git-sizer --verbose
# Limpeza segura de hist√≥rico
git filter-repo --strip-blobs-bigger-than 10M
# ou
bfg --strip-blobs-bigger-than 10M
Enter fullscreen mode
Exit fullscreen mode
M√©tricas para decis√£o
Antes de iniciar o levantamento, me√ßa:
Baseline atual:
# Tamanho do reposit√≥rio
du -sh .git
# Tempo de clone
time git clone <repo-url>
# Maiores arquivos no hist√≥rico
git-sizer --verbose | grep "Maximum blob size"
Enter fullscreen mode
Exit fullscreen mode
Ap√≥s limpeza, compare:
Redu√ß√£o de tamanho (%)
Redu√ß√£o no tempo de clone (segundos)
Impacto no tempo de CI/CD
ROI esperado:
Reposit√≥rios >1GB: ganhos significativos em equipes m√©dias/grandes
Reposit√≥rios <100MB: avaliar custo vs. benef√≠cio caso a caso
Recomenda√ß√µes Pr√°ticas
A√ß√µes Imediatas:
Configurar .gitignore adequado:
# Build artifacts
*.dll
*.so
*.exe
*.o
target/
dist/
build/
# Depend√™ncias
node_modules/
vendor/
Enter fullscreen mode
Exit fullscreen mode
Auditar com git-sizer:
git-sizer --verbose
Enter fullscreen mode
Exit fullscreen mode
Implementar pre-commit hooks:
# Exemplo: bloquear arquivos >10MB
#!/bin/bash
MAX_SIZE=10485760
for file in $(git diff --cached --name-only); do
size=$(wc -c < "$file")
if [ $size -gt $MAX_SIZE ]; then
echo "Erro: $file excede 10MB"
exit 1
fi
done
Enter fullscreen mode
Exit fullscreen mode
Longo Prazo:
Definir pol√≠tica clara de versionamento
Migrar bin√°rios para solu√ß√£o apropriada (LFS, Artifactory, etc.)
Documentar no README.md como obter depend√™ncias
Medir impacto continuamente
Alinhar com requisitos de compliance quando aplic√°vel
Refer√™ncias Verific√°veis
Documenta√ß√£o Oficial
Git SCM - Git Attributes
https://git-scm.com/book/en/v2/Customizing-Git-Git-Attributes
Explica como Git lida com bin√°rios e limita√ß√µes de diff/merge
Atlassian - Git LFS Tutorial
https://www.atlassian.com/git/tutorials/git-lfs
Guia oficial sobre quando e como usar Git LFS no Bitbucket
GitHub - Working with Large Files
https://docs.github.com/en/repositories/working-with-files/managing-large-files
Pr√°ticas recomendadas para arquivos grandes
Livros de Refer√™ncia
Pro Git (Scott Chacon & Ben Straub)
https://git-scm.com/book
Cap√≠tulos relevantes: 2.2 (Git Basics), 10.2 (Git Internals - Objects)
Version Control with Git (Jon Loeliger & Matthew McCullough)
O'Reilly Media
Cobertura t√©cnica sobre armazenamento de objetos e performance
Papers Acad√™micos
"Why Google Stores Billions of Lines of Code in a Single Repository"
Communications of ACM, Vol. 59 No. 7, Pages 78-87 (2016)
https://dl.acm.org/doi/10.1145/2854146
Estrat√©gias de monorepo e gerenciamento de assets em larga escala
Conclus√£o
O levantamento quase sempre compensa, mas o valor real est√° em medir o impacto para seu contexto espec√≠fico:
Cen√°rios onde √© essencial:
Reposit√≥rios usados por equipes grandes (>10 pessoas)
Storage >500MB com crescimento cont√≠nuo
Tempo de clone >2 minutos
Pipelines CI/CD lentos
Cen√°rios onde avaliar custo-benef√≠cio:
Reposit√≥rios pequenos (<100MB) e isolados
Equipes reduzidas (<5 pessoas)
Bin√°rios necess√°rios para compliance
Baixa frequ√™ncia de opera√ß√µes Git
Abordagem recomendada:
Piloto: escolher 1-2 reposit√≥rios cr√≠ticos
Medir: coletar m√©tricas antes/depois
Calcular ROI: tempo economizado √ó n√∫mero de desenvolvedores
Decidir: expandir pol√≠tica baseado em dados concretos
Pr√≥ximos passos: Este embasamento te√≥rico ser√° complementado com dados reais do levantamento em andamento. A prova de conceito em reposit√≥rio piloto permitir√° validar as premissas aqui apresentadas e quantificar ganhos espec√≠ficos para nosso contexto.
Sua experi√™ncia
J√° passou por situa√ß√£o similar? Est√° considerando fazer um levantamento na sua empresa? Compartilhe nos coment√°rios!
Tags: git devops productivity bestpractices tutorial
Top comments (0)
Subscribe
Personal
Trusted User
Create template
Templates let you quickly answer FAQs or store snippets for re-use.
Submit
Preview
Dismiss
Code of Conduct
‚Ä¢
Report abuse
Are you sure you want to hide this comment? It will become hidden in your post, but will still be visible via the comment's permalink.
Hide child comments as well
Confirm
For further actions, you may consider blocking this person and/or reporting abuse
Valdemar Arantes Neto
Follow
Arquiteto de software na Valid, vivendo entre Java, Kotlin e GCP. J√° cantei em coral, hoje toco piano quando n√£o estou mergulhado em c√≥digo. Apaixonado por cinema, livros e filosofia ‚Äî da fic√ß√£o hist√≥
Location
S√£o Paulo, SP, Brazil
Education
Electrical Engineering graduate from POLI-USP (S√£o Paulo)
Work
Software Architect at Valid
Joined
Nov 13, 2024
Trending on DEV Community
Hot
3 Reasons You're in Tech Post-Layoff Shock (Based on personal experience)
#career
#beginners
#learning
Git: From Zero to First Commit - Developer Journey Begins
#devops
#git
#beginners
#programming
AI Infrastructure Cloud Setup: Practical Choices That Scale
#ai
#architecture
#infrastructure
#cloud
üíé DEV Diamond Sponsors
Thank you to our Diamond Sponsors for supporting the DEV Community
Google AI is the official AI Model and Platform Partner of DEV
Neon is the official database partner of DEV
Algolia is the official search partner of DEV
DEV Community ‚Äî A space to discuss and keep up software development and manage your software career
Home
DEV++
Welcome Thread
Podcasts
Videos
Tags
DEV Education Tracks
DEV Challenges
DEV Help
Advertise on DEV
DEV Showcase
About
Contact
Forem Shop
Code of Conduct
Privacy Policy
Terms of Use
Built on Forem ‚Äî the open source software that powers DEV and other inclusive communities.
Made with love and Ruby on Rails. DEV Community ¬© 2016 - 2025.
We're a place where coders share, stay up-to-date and grow their careers.
Log in
Create account