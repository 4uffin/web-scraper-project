Seu Sistema EstÃ¡ Pronto pro Pico ou Vai Abandonar o UsuÃ¡rio Quando Mais Precisar? - DEV Community
Forem Feed
Follow new Subforems to improve your feed
DEV Community
Follow
A space to discuss and keep up software development and manage your software career
Gamers Forem
Follow
An inclusive community for gaming enthusiasts
Future
Follow
News and discussion of science and technology such as AI, VR, cryptocurrency, quantum computing, and more.
Music Forem
Follow
From composing and gigging to gear, hot music takes, and everything in between.
DUMB DEV Community
Follow
Memes and software development shitposting
Vibe Coding Forem
Follow
Discussing AI software development, and showing off what we're building.
Popcorn Movies and TV
Follow
Movie and TV enthusiasm, criticism and everything in-between.
Design Community
Follow
Web design, graphic design and everything in-between
Maker Forem
Follow
A community for makers, hobbyists, and professionals to discuss Arduino, Raspberry Pi, 3D printing, and much more.
Scale Forem
Follow
For engineers building software at scale. We discuss architecture, cloud-native, and SREâ€”the hard-won lessons you can't just Google
Forem Core
Follow
Discussing the core forem open source software project â€” features, bugs, performance, self-hosting.
Security Forem
Follow
Your central hub for all things security. From ethical hacking and CTFs to GRC and career development, for beginners and pros alike
Open Forem
Follow
A general discussion space for the Forem community. If it doesn't have a home elsewhere, it belongs here
Crypto Forem
Follow
A collaborative community for all things Cryptoâ€”from Bitcoin to protocol development and DeFi to NFTs and market analysis.
Dropdown menu
Dropdown menu
Skip to content
Navigation menu
Search
Powered by Algolia
Search
Log in
Create account
DEV Community
Close
Add reaction
Like
Unicorn
Exploding Head
Raised Hands
Fire
Jump to Comments
Save
Boost
More...
Moderate
Copy link
Copy link
Copied to Clipboard
Share to X
Share to LinkedIn
Share to Facebook
Share to Mastodon
Report Abuse
Ed Wantuil
Posted on Sep 21
Seu Sistema EstÃ¡ Pronto pro Pico ou Vai Abandonar o UsuÃ¡rio Quando Mais Precisar?
#escalabilidade
#testesdecarga
#testesdeestresse
#qualidadedesoftware
Quando grandes pontes sÃ£o construÃ­das, engenheiros nÃ£o economizam em testes. Primeiro, simulam cargas extremas em projetos digitais e maquetes. Depois, com a estrutura pronta, realizam testes reais com caminhÃµes pesados e sensores espalhados por toda a obra.
Tudo isso nÃ£o Ã© sÃ³ pra garantir que a ponte fique de pÃ©, Ã© pra ela aguentar o pior congestionamento possÃ­vel.
Agora pense: aviÃµes, elevadores, pneusâ€¦ Quase tudo que usamos no dia a dia passa porÂ testes rigorosos.
EntÃ£o por que, no desenvolvimento de software, tanta gente ainda confia cegamente que â€œvai dar tudo certoâ€?
Spoiler:Â NÃ£o vai. E a realidade cobra, e cobra rÃ¡pido.
ğŸ”¥ Quando Tudo Vai Pro EspaÃ§o (Mesmo em Grandes Empresas)
Recentemente, na liberaÃ§Ã£o da prÃ©-venda do Nintendo Switch 2, atÃ© sites gigantes tombaram, incapazes de lidar com a avalanche de acessos. E isso nÃ£o Ã© um caso isolado. Lembra da venda de ingressos do Ãºltimo show que vocÃª tentou comprar?
O problema costuma nascer de um otimismo quase infantil: a crenÃ§a de que recursos computacionais sÃ£o infinitos ou de que â€œproblemas de capacidadeâ€ sÃ£o coisa do passado.
Outros ainda jogam a batata quente exclusivamente pra equipe de infraestrutura, ignorando o fato de queÂ garantir escalabilidade e resiliÃªncia Ã© responsabilidade de todo o time, devs, QA, arquitetura, produto e afins.
ğŸ§ª Planejar, Testar e Validar: O TrÃ­plice Mandamento da Estabilidade
Se vocÃª Ã© da Ã¡rea de tecnologia, precisa encarar a realidade:Â planejar, testar e validar suas aplicaÃ§Ãµes para os momentos de estresse Ã© tÃ£o essencial quanto testar uma ponte antes de inaugurÃ¡-la.
NÃ£o deixe sua entrega ruirÂ exatamente quando ela mais for necessÃ¡ria.
Ã‰ aÃ­ que entram osÂ testes de carga.
ğŸ§± O Que SÃ£o Testes de Carga?
Testes de carga simulam o comportamento de vÃ¡rios usuÃ¡rios acessando sua aplicaÃ§Ã£o ao mesmo tempo, como se vocÃª pudesse provocar, de forma controlada, o pior congestionamento possÃ­vel na sua "ponte digital".
Esses testes sÃ£o essenciais para identificar:
Gargalos de performance;
Pontos frÃ¡geis na arquitetura;
Limites de capacidade operacional.
Sem eles, vocÃª estÃ¡ lanÃ§ando seu sistemaÂ Ã s cegas, apostando que ele vai aguentar qualquer volume de acessosÂ e apostar nÃ£o Ã© estratÃ©gia.
Investir em testes de carga Ã© investir em confianÃ§a, estabilidade e, no fim das contas,Â na experiÃªncia do usuÃ¡rio, aquele que nÃ£o vai te perdoar se o app falhar justamente quando ele mais precisar.
ğŸ“ Antes de Testar: FaÃ§a a Estimativa Certa
Mas atenÃ§Ã£o:Â antes de testar, Ã© essencial estimar corretamente o volume de acesso que vocÃª quer simular.
Esse processo comeÃ§a com a anÃ¡lise de:
Picos histÃ³ricos de uso da aplicaÃ§Ã£o;
ProjeÃ§Ãµes para eventos especiais (grandes lanÃ§amentos, campanhas de marketing, repercussÃµes inesperadas).
E vai alÃ©m: vocÃª tambÃ©m precisa considerarÂ cenÃ¡rios de falha de infraestrutura, seja no seu data center ou na nuvem.
â˜ï¸Â Cloud nÃ£o Ã© invencÃ­vel: zonas podem cair, regiÃµes inteiras podem ficar indisponÃ­veis por horas.
Sua aplicaÃ§Ã£o precisa estar preparada para redistribuir a carga e continuar operando.
ğŸ§  Exemplo PrÃ¡tico: Planejando a Carga
Imagine que seu site, em um dia comum, sustenta 2 mil usuÃ¡rios simultÃ¢neos no pico.
Agora, considere um evento especial (tipo Black Friday ou lanÃ§amento viral) que pode multiplicar esse nÃºmero por 5.
AlÃ©m disso, pense na hipÃ³tese de umaÂ falha em uma zona da nuvem, que forÃ§aria sua aplicaÃ§Ã£o a redistribuir a carga emÂ apenas metade da infraestruturaÂ disponÃ­vel.
Nesse cenÃ¡rio, o teste de carga precisa simular:
10 mil usuÃ¡rios simultÃ¢neos,
rodando emÂ 50% da sua estrutura atual.
ğŸ› ï¸ Ferramentas Para Testes de Carga
Hoje, existem vÃ¡rias ferramentas, gratuitas e corporativas, que ajudam a simular acessos simultÃ¢neos, medir performance e identificar pontos crÃ­ticos.
Entre as mais conhecidas estÃ£o:
Apache JMeter
K6
Locust
Artillery
Gatling
Vamos focar aqui noÂ K6, que Ã© leve, simples e bem poderosa.
ğŸ§ª Criando um Endpoint para Teste com Node.js
Para testar com K6, primeiro vamos subir um serviÃ§o local simples com Node.js que sempre retorna um status 200.
Crie o arquivoÂ server.jsÂ com o seguinte conteÃºdo:
const http = require('http');
const server = http.createServer((req, res) => {
res.writeHead(200, { 'Content-Type': 'text/plain' });
res.end('OK');
});
const port = 3000;
server.listen(port, () => {
console.log(`Server running at http://localhost:${port}`);
});
Enter fullscreen mode
Exit fullscreen mode
Execute com:
node server.js
Enter fullscreen mode
Exit fullscreen mode
Agora temos um endpoint local na porta 3000 (ou a que for exibida no terminal).
âš™ï¸ Instalando o K6
Para utilizar o k6 devemos fazer a instalaÃ§Ã£o da seguinte forma.
Linux (Ubuntu):
sudo apt update
sudo apt install gnupg ca-certificates
sudo mkdir -m0755 -p /etc/apt/keyrings
curl -fsSL https://dl.k6.io/key.gpg | sudo gpg --dearmor -o /etc/apt/keyrings/k6-archive-keyring.gpg
echo "deb [signed-by=/etc/apt/keyrings/k6-archive-keyring.gpg] https://dl.k6.io/deb stable main" | sudo tee /etc/apt/sources.list.d/k6.list
sudo apt update
sudo apt install k6
Enter fullscreen mode
Exit fullscreen mode
Mac:
brew install k6
Enter fullscreen mode
Exit fullscreen mode
Windows (com Chocolatey):
choco install k6
Enter fullscreen mode
Exit fullscreen mode
ğŸš€ Primeiro Teste de Carga com 50 UsuÃ¡rios
Crie o arquivoÂ load-test.js:
import http from 'k6/http';
import { check } from 'k6';
export const options = {
vus: 50,
duration: '30s',
};
export default function () {
const res = http.get('http://localhost:3000');
check(res, { 'status Ã© 200': (r) => r.status === 200 });
}
Enter fullscreen mode
Exit fullscreen mode
Esse script simulaÂ 50 usuÃ¡rios virtuais (VUs)Â acessando o endpointÂ http://localhost:3000Â duranteÂ 30 segundos.
Cada VU faz requisiÃ§Ãµes continuamente, e a funÃ§Ã£oÂ checkÂ valida se a resposta tem o cÃ³digo de statusÂ 200.
Execute-o com:
k6 run teste.js
Enter fullscreen mode
Exit fullscreen mode
ğŸ“Š Interpretando os Resultados do K6
Ao executar devemos ter o retorno algo como print abaixo:
ï¿¼
Nele podemos encontrar:
checks_total / succeeded / failed:
Verifica a quantidade total de verificaÃ§Ãµes (check) feitas, quantas passaram e quantas falharam.
âœ… Neste caso: 1.675.407 verificaÃ§Ãµes comÂ 100% de sucesso.
http_req_duration:
Tempo total de duraÃ§Ã£o das requisiÃ§Ãµes HTTP (da saÃ­da atÃ© a resposta).
avg: mÃ©dia geral (850.51Î¼s, excelente).
med: mediana (618Î¼s).
max: tempo mÃ¡ximo (90.91ms).
p(90)Â eÂ p(95): percentis (ex: 95% das requisiÃ§Ãµes levaram atÃ© 1.89ms).
http_req_failed:
Percentual de falhas nas requisiÃ§Ãµes.
âœ… Aqui:Â 0.00%, nenhuma falha.
iteration_duration:
DuraÃ§Ã£o de cada iteraÃ§Ã£o completa (requisiÃ§Ã£o + lÃ³gica de script).
vus / vus_max:
Quantidade de usuÃ¡rios virtuais ativos (aqui foram fixos em 50).
data_received / data_sent:
Volume de dados trafegados durante o teste (283MB recebidos, 139MB enviados).
http_reqs:
Total de requisiÃ§Ãµes realizadas: 1.675.407
> Taxa: ~55.843 requisiÃ§Ãµes/segundo.
âœ… O resultado mostra que o endpoint respondeu rapidamente, sem erros, mesmo sob alta taxa de requisiÃ§Ãµes simultÃ¢neas.
ğŸ“ˆ Rampas de Carga: Porque Nem Todo Pico Vem de Uma Vez
Em muitos cenÃ¡rios,Â nÃ£o basta testar se a aplicaÃ§Ã£o suporta uma determinada carga de forma imediata. Para entender de fato o comportamento do sistema sob diferentes nÃ­veis de pressÃ£o, Ã© fundamental aplicarÂ rampas de carga nos testes.
Esse tipo de abordagem permite observar como a aplicaÃ§Ã£o responde Ã  medida que o nÃºmero de usuÃ¡rios cresce gradualmente, alÃ©m de ser essencial paraÂ avaliar a eficÃ¡cia da elasticidadeÂ (escalabilidade automÃ¡tica) e identificar possÃ­veis gargalos ao longo da curva de crescimento.
Vamos criar um novo cÃ³digo baseado no exemplo anterior que iremos incluir uma rampa de carga. Nesse novo teste, vamos:
Simular 50 usuÃ¡rios virtuais nos primeiros 30 segundos;
Aumentar para 100 usuÃ¡rios nos 30 segundos seguintes;
Manter os 100 usuÃ¡rios por mais 30 segundos;
E por fim, reduzir a carga de forma gradual atÃ© zero ao longo de 30 segundos.
Em testes reais, o ideal Ã© que esses tempos sejam maiores eÂ ajustados Ã  realidade do seu sistema, refletindo picos esperados de uso com maior fidelidade.
Exemplo com Rampa de Carga
Crie oÂ ramp-load-test.jsÂ com o seguinte conteÃºdo:
import http from 'k6/http';
import { check } from 'k6';
export const options = {
stages: [
{ duration: '30s', target: 50 },
{ duration: '30s', target: 100 },
{ duration: '30s', target: 100 },
{ duration: '30s', target: 0 },
],
};
export default function () {
const res = http.get('http://localhost:3000');
check(res, { 'status is 200': (r) => r.status === 200 });
}
Enter fullscreen mode
Exit fullscreen mode
Execute-o com:
k6 run ramp-load-test.js
Enter fullscreen mode
Exit fullscreen mode
Esses testes devem ser executados emÂ duraÃ§Ã£o proporcional ao cenÃ¡rio real, aumentando, sustentando e reduzindo a carga como em eventos reais.
ğŸ›¡ï¸ Use Ferramentas de Observabilidade
RelatÃ³rios do K6 sÃ£o Ã³timos, mas para diagnÃ³sticos profundos, combine os testes com ferramentas como:
New Relic
Datadog
Dynatrace
Elastic Stack
Splunk
Elas mostram uso de CPU, memÃ³ria, latÃªncia entre serviÃ§os, Apdex, etc. Isso transforma dados emÂ decisÃµes reais sobre arquitetura e negÃ³cios.
ğŸš¨ E Quando VocÃª NÃ£o Sabe o Pico?
Em muitos casos, especialmente durante o desenvolvimento de novas aplicaÃ§Ãµes,Â nÃ£o teremos um nÃºmero exato de usuÃ¡rios para simular nos testes de carga. Nesses cenÃ¡rios, Ã© recomendÃ¡vel conduzir umÂ teste de estresseÂ atÃ© identificar o ponto de saturaÃ§Ã£o do sistema, sim a principal diferenÃ§a do teste de carga e de estresse Ã© que o primeiro Ã© utilizado para responder se a aplicaÃ§Ã£o suporta uma determinada carga, em quanto o segundo responde atÃ© qual carga a aplicaÃ§Ã£o consegue lhe dar.
Esse tipo de teste permite fornecer ao time de negÃ³cio uma visÃ£o clara dos limites atuais da aplicaÃ§Ã£o, possibilitando decisÃµes mais conscientes sobre infraestrutura, roadmap de melhorias e comunicaÃ§Ã£o com usuÃ¡rios.
Sim, a principal diferenÃ§a entre teste de carga e teste de estresse estÃ¡ no objetivo:
OÂ teste de cargaÂ busca validar se a aplicaÃ§Ã£o suportaÂ uma carga especÃ­ficaÂ dentro de parÃ¢metros aceitÃ¡veis.
JÃ¡ oÂ teste de estresseÂ tem como foco descobrirÂ atÃ© qual ponto a aplicaÃ§Ã£o consegue lidar com o aumento de carga, identificando o momento em que comeÃ§a a falhar ou degradar seu desempenho.
Para realizar um teste de carga no K6, basta subir a va quantidade de VUs, e se for necessÃ¡rio aumentar a quantidade de rampas para entender o comportamento em cada etapa.
ğŸ’¡ Dica Final: Elasticidade TambÃ©m Ã‰ Desescalar
Ambientes elÃ¡sticos devemÂ voltar ao normal apÃ³s o pico. Se os recursos nÃ£o forem liberados, vocÃª pode acabar com:
Overprovisioning;
Uso desnecessÃ¡rio de mÃ¡quinas;
E, claro, aquelaÂ fatura de nuvem mais assustadora que bug em produÃ§Ã£oÂ ğŸ‘»ğŸ’¸
ğŸ§© ConclusÃ£o: Testar Ã© Prevenir, NÃ£o Remediar
Toda ponte, aviÃ£o ou elevador passa por testes antes de ser usado por milhÃµes de pessoas. No mundo digital, o raciocÃ­nio precisa ser o mesmo.
NÃ£o espere o caos para descobrir onde sua aplicaÃ§Ã£o falha.
Testes de carga nÃ£o sÃ£o â€œluxo de grandes empresasâ€, sÃ£o prÃ¡tica essencial para qualquer sistema que leve a sÃ©rio a prÃ³pria estabilidade, reputaÃ§Ã£o e experiÃªncia do usuÃ¡rio.
Ignorar isso Ã© aceitar o risco de colapsar quando mais importa.
Top comments (0)
Subscribe
Personal
Trusted User
Create template
Templates let you quickly answer FAQs or store snippets for re-use.
Submit
Preview
Dismiss
Code of Conduct
â€¢
Report abuse
Are you sure you want to hide this comment? It will become hidden in your post, but will still be visible via the comment's permalink.
Hide child comments as well
Confirm
For further actions, you may consider blocking this person and/or reporting abuse
Ed Wantuil
Follow
Meu objetivo Ã© compartilhar conhecimento, criar soluÃ§Ãµes e ajudar outras pessoas a evoluÃ­rem na carreira de tecnologia.
Location
Brasil
Joined
Dec 15, 2023
Trending on DEV Community
Hot
Why Are You Not Reading My Post?
#tutorial
#discuss
#productivity
#career
What was your win this week?!
#weeklyretro
#discuss
3 Reasons You're in Tech Post-Layoff Shock (Based on personal experience)
#career
#beginners
#learning
ğŸ’ DEV Diamond Sponsors
Thank you to our Diamond Sponsors for supporting the DEV Community
Google AI is the official AI Model and Platform Partner of DEV
Neon is the official database partner of DEV
Algolia is the official search partner of DEV
DEV Community â€” A space to discuss and keep up software development and manage your software career
PÃ¡gina Inicial
DEV++
Welcome Thread
Podcasts
Videos
Tags
DEV Education Tracks
DEV Challenges
DEV Help
Advertise on DEV
DEV Showcase
Sobre
Contato
Free Postgres Database
Software comparisons
Forem Shop
CÃ³digo de Conduta
PolÃ­tica de Privacidade
Termos de Uso
Built on Forem â€” the open source software that powers DEV and other inclusive communities.
Made with love and Ruby on Rails. DEV Community Â© 2016 - 2025.
We're a place where coders share, stay up-to-date and grow their careers.
Log in
Create account