c++ - How can I read in XML String Attributes with libcereal? - Stack Overflow
Skip to main content
Stack Overflow
About
Products
For Teams
Stack Overflow for Teams
Where developers & technologists share private knowledge with coworkers
Advertising
Reach devs & technologists worldwide about your product, service or employer brand
Knowledge Solutions
Data licensing offering for businesses to build and improve AI tools and models
Labs
The future of collective knowledge sharing
About the company
Visit the blog
Loading…
current community
Stack Overflow
help
chat
Meta Stack Overflow
your communities
Sign up or log in to customize your list.
more stack exchange communities
company blog
Log in
Sign up
Home
Questions
AI Assist
Labs
Tags
Challenges
Chat
Articles
Users
Jobs
Companies
Collectives
Communities for your favorite technologies.
Explore all Collectives
Teams
Ask questions, find answers and collaborate at work with Stack Overflow for Teams.
Try Teams for free
Explore Teams
Teams
Ask questions, find answers and collaborate at work with Stack Overflow for Teams.
Explore Teams
Collectives™ on Stack Overflow
Find centralized, trusted content and collaborate around the technologies you use most.
Learn more about Collectives
Teams
Q&A for work
Connect and share knowledge within a single location that is structured and easy to search.
Learn more about Teams
How can I read in XML String Attributes with libcereal?
Ask Question
Asked
8 days ago
Modified
8 days ago
Viewed
46 times
0
I have been searched since over a week for the fail I seems to have done. I simply want to read in a testing XML-File as follows:
<?xml version="1.0" encoding="utf-8"?>
<tester>
<asset>
</asset>
<library_geometries>
<geometry id="Dummy" name="Cube">
<mesh>
</mesh>
</geometry>
</library_geometries>
</tester>
I think that I've been overseen some important things for that and it seems that I don't see the solution before the whole reference for the lib.
I have defined a class to manage it, the declaration is similar how on the website text told:
// In the class definition of MyVals: template <class Archive, class K, class V, cereal::traits::EnableIf<cereal::traits::is_text_archive<Archive>::value> = cereal::traits::sfinae> inline void load(Archive & ar, std::map<std::string, std::string, K, V> & map , std::string &keying_name);
It seems, that the value of the id could not get read, but how it could work?
I've tried a load function similar to the told one from the website above and put a call in the redefined default constructor. I hoped to see whether there are characters in the value string, but the terminal outputs show me that it's empty. The Definition is as follows:
// The definition of load method
template<class Archive, class K, class V, cereal::traits::EnableIf<cereal::traits::is_text_archive<Archive>::value>> inline
void MyVals::load(Archive &ar, std::map<std::string, std::string, K, V> &str_attr, std::string &keying_name){ //std::map<std::string, std::string> &map,
str_attr.clear();
std::cout << "The node is at: " << ar.getNodeName() << " but should be geometry.\n";
auto hint = str_attr.begin();
//const auto namePtr = ar.getNodeName();
auto argPtr = ar.getNodeName();
while(true){
const auto namePtr = ar.getNodeName();
//auto argPtr =
if(namePtr != NULL){
std::cout << "Node Name is: " << namePtr << "\n";
std::cout << "argPtr is: " << argPtr << '\n';
}/* else {
std::cout << "namePtr is NULL! But should be: " << "geometry" << "\n";
}*/
if(!namePtr)
break;/*{
std::cout << "\n\tLeaving load().\n\n\n";
break;
}*/
std::string key = namePtr;
std::cout << "key carries now the value: " << key << '\n';
std::string value;
ar(value);
//auto nextPtr = ar.getNodeName();
std::string key_names;
//ar(nextPtr);
//std::cout << "nextPtr carries: " << nextPtr << std::endl;
//ar(value);
std::cout << "Value carries: " << value << std::endl;
//const char *p_value;
std::string s_value = std::string("None");
//ar(cereal::make_nvp(std::move( std::string("id") ), std::move( s_value ) )); //key_name.c_str()
std::cout << "loading debug 1.\n";
hint = str_attr.emplace_hint( hint, std::move( std::string(key_name) ), std::move( value ) );
if(str_attr.find(key_name) != str_attr.end()){
std::cout << "key is: " << keying_name << " value is: " << str_attr[keying_name] << "\n";
std::cout << "value length is: " << str_attr[keying_name].length() << "\n\n";
} else {
std::cout << key_name << ": No matching key found!\n";
}
std::cout << "K is: " << str_attr.count(keying_name) << " V is: " << str_attr[keying_name] << "\n\n";
//load_string_value(key_name , s_value, ar);
//map[key] = value;
//V = value;
}
std::cout << "\n\tLeaving load().\n\n\n";
}
The constructor reproduced in excerpts is as follows:
// The standard constructor
MyVals::MyVals( ){
std::cout << "\n\n\n\tCalling standard Constructor!\n";
in = std::ifstream("test2.xml");
if(in.is_open() != true){
std::cerr << "\t\tError! Could not open the file!\n\n";
//return -1;
} else {
std::cout << "\t\tShould be open. The file is named: " << "test2.xml" << "\n\n";
}
std::cout << "Creating archive.\n";
cereal::XMLInputArchive archive(in);
first_node_name = std::string(archive.getNodeName());
archive.setNextName("library_geometries");
archive.startNode();
std::cout << "The node is changed to: library_geometries/";
std::cout << archive.getNodeName() << "\n";
archive.setNextName("geometry");
std::string key;
std::string value;
key_name = std::string("id");
std::cout << "\nFirst load call.\n\n";
std::map<std::string, std::string> str_attr;
load(archive, str_attr, key_name);
std::map<std::string, std::string>::iterator iter = str_attr.find(key_name.c_str());
...
if(iter != str_attr.end()){
std::cout << "Found.\n\n";
if(str_attr.count(key_name) != 0)
m_first_attributes.id = key_name;
m_first_attributes.id_val = str_attr[key_name];
} else {
std::cout << "Key, " << key_name << " not found!\n\n";
}
std::cout << "id (key): " << m_first_attributes.id << "\n";
std::cout << "id value: " << m_first_attributes.id_val << "\n\n";
std::cout << "id value as a c string: " << m_first_attributes.id_val.c_str() << "\n\n";
cereal::NameValuePair<std::string> identpair("id", std::string(m_first_attributes.id));
std::cout << "\n\nidented pair." << m_first_attributes.id << "\n\n";
out = std::ofstream("test3.xml");
std::cout << "\n\tReturning from standard Constructor!\n\n\n";
}
I wont to get the string "Dummy" as a value, but the cut out of the terminal output is this:
...
Calling standard Constructor!
Should be open. The file is named: test2.xml
Creating archive.
The node is changed to: library_geometries/geometry
First load call.
The node is at: geometry but should be geometry.
Node Name is: geometry
argPtr is: geometry
key carries now the value: geometry
Value carries:
loading debug 1.
key is: id value is:
value length is: 0
K is: 1 V is:
Leaving load().
...
Found.
id (key): id
id value:
id value as a c string:
idented pair.id
Returning from standard Constructor!
...
I don't know further, so I have no other chance than ask here.
c++xmlcereal
Share
Improve this question
Follow
asked Sep 17 at 12:17
ABurk85NGABurk85NG
1111 bronze badge
7
I don't know cereal... but if I look at its documentation it seems 1) it is not a generic xml library (it expects to read back xml it has written itself) an to me it also integrates too much with C++ code itself (e.g. adding templated serialize methods to classes). Is using xml + cereal really a requirement for you? Otherwise using json + nlohmann json might be more easy.
Pepijn Kramer
–
Pepijn Kramer
2025-09-17 12:26:31 +00:00
Commented
Sep 17 at 12:26
Yes, because it is a try to train reading in a COLLADA-file ant that's exported in xml. In previous I tried it per assimp, but the results was not use full for the virtual bones. So I located a Tutorial for reading in Collada files with an all ready known xml library for the user. But I don't know any other, and with libcereal I'm a beginner.
ABurk85NG
–
ABurk85NG
2025-09-17 12:34:32 +00:00
Commented
Sep 17 at 12:34
I would do more research on other libraries you could use. This seems to not integrate with XML directly very well, as @PepijnKramer mentioned, it hooks into C++ by itself.
Lil_PhyziX
–
Lil_PhyziX
2025-09-17 12:51:09 +00:00
Commented
Sep 17 at 12:51
See What XML parser should I use in C++?
Pepijn Kramer
–
Pepijn Kramer
2025-09-17 12:55:36 +00:00
Commented
Sep 17 at 12:55
Oh okay? Hmm, ... I am looking in to the package manager an he shows me a library with name tinyxml2, but I still have no Idea whether it is better. I think, that I invest 2 or 3 Days to check it out, whether it could be the better way. But for first I don't think that I should close this question.
ABurk85NG
–
ABurk85NG
2025-09-17 13:27:54 +00:00
Commented
Sep 17 at 13:27
|
Show 2 more comments
Related questions
3385
How do I iterate over the words of a string?
2186
How can I convert int to string in C++?
2325
How do you parse and process HTML/XML in PHP?
Related questions
3385
How do I iterate over the words of a string?
2186
How can I convert int to string in C++?
2325
How do you parse and process HTML/XML in PHP?
1168
How can I parse XML and get instances of a particular node attribute?
1032
How can I trim a std::string?
948
How do I comment out a block of tags in XML?
723
How can I pretty print XML content from the command line?
828
How can I convert a std::string to int?
1098
How to convert a std::string to const char* or char*
480
How do I read and parse an XML file in C#?
Load 7 more related questions
Show fewer related questions
0
Sorted by:
Reset to default
Highest score (default)
Trending (recent votes count more)
Date modified (newest first)
Date created (oldest first)
Know someone who can answer? Share a link to this question via email, Twitter, or Facebook.
Your Answer
Thanks for contributing an answer to Stack Overflow!Please be sure to answer the question. Provide details and share your research!But avoid …Asking for help, clarification, or responding to other answers.Making statements based on opinion; back them up with references or personal experience.To learn more, see our tips on writing great answers.
Draft saved
Draft discarded
Sign up or log in
Sign up using Google
Sign up using Email and Password
Submit
Post as a guest
Name
Email
Required, but never shown
Post as a guest
Name
Email
Required, but never shown
Post Your Answer
Discard
By clicking “Post Your Answer”, you agree to our terms of service and acknowledge you have read our privacy policy.
Start asking to get answers
Find the answer to your question by asking.
Ask question
Explore related questions
c++xmlcereal
See similar questions with these tags.
The Overflow Blog
Democratizing your data access with AI agents
The history and future of software development (part 1)
Featured on Meta
Spevacus has joined us as a Community Manager
Introducing a new proactive anti-spam measure
New and improved coding challenges
New comment UI experiment graduation
Policy: Generative AI (e.g., ChatGPT) is banned
Linked
391
What XML parser should I use in C++?
Hot Network Questions
Was King George VI’s lung surgery performed at Buckingham Palace as shown?
How to delete a file with a very long (and very strange) filename in Windows?
Separating trefoil knot on torus
Can the airline or ground staff legally stop passengers from disembarking a plane?
Regulator circuit outputs negative current
What does it mean for work to be done ON a system?
How to use ≥ 16 usbip ports from one host controller on Debian?
rkhunter Updates -- "no updates" for several months now
Space Princess Space Tours: Black Holes merging - what would you visually see?
Simplification of an analytically evaluated integral expressed in terms of elliptic integrals
Convex sets, tangent cones and convergence
What's the cents value of these SMuFL accidentals?
From honeycombs to a cube
What does "my left a** cheek" mean?
Removing temporary LaTeX files
What is an aggravating factor and why is kinship considered one?
I'm having a hard time intuiting throttle position to engine rpm consistency between gears -- why do cars behave in this observed way?
What is the exact meaning of olcAccess: {1}to dn.exact="" by * read
Which driving direction syncs with Quebec’s and Maritime Canada’s autumn leaf colors?
Change the font for the dagger symbol in math mode
If 3-D is too easy, go 4-D
How to design a circuit that outputs the binary position of the 3rd set bit from the right in an 8-bit input?
Smoothing a triangulated surface without changing its quasi-isometry class
Are there injections that combine 80 different vaccines?
more hot questions
Question feed
Subscribe to RSS
Question feed
To subscribe to this RSS feed, copy and paste this URL into your RSS reader.
default
Stack Overflow
Questions
Help
Chat
Products
Teams
Advertising
Talent
Company
About
Press
Work Here
Legal
Privacy Policy
Terms of Service
Contact Us
Your Privacy Choices
Cookie Policy
Stack Exchange Network
Technology
Culture & recreation
Life & arts
Science
Professional
Business
API
Data
Blog
Facebook
Twitter
LinkedIn
Instagram
Site design / logo © 2025 Stack Exchange Inc;
user contributions licensed under
CC BY-SA
.
rev 2025.9.25.34480