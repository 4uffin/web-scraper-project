What's the right way to connect to your IoT devices on another VLAN?
Menu
Sign in now
Close
News
PC Hardware
Submenu
CPU
GPU
Storage
Monitors
Keyboards & Mice
Software
Submenu
Productivity
Other Software
Operating Systems
Submenu
Windows
Linux
macOS
Devices
Submenu
Single-Board Computers
Laptops
Gaming Handheld
Prebuilt PC
Home
Submenu
Networking
Smart Home
Gaming
Submenu
Game Reviews
Sign in
Newsletter
Menu
Follow
Followed
Like
Threads
5
More Action
Summary
Generate a summary of this story
Sign in now
Switch 2
RTX 5060
Windows 11
Gaming
Forums
Close
What's the right way to connect to your IoT devices on another VLAN?
Credit:
By
Joe Rice-Jones
Published Sep 4, 2025
Maker, meme-r, and unabashed geek, Joe has been writing about technology since starting his career in 2018 at KnowTechie. He's covered everything from Apple to apps and crowdfunding and loves getting to the bottom of complicated topics. In that time, he's also written for SlashGear and numerous corporate clients before finding his home at XDA in the spring of 2023.
He was the kid who took apart every toy to see how it worked, even if it didn't exactly go back together afterward. That's given him a solid background for explaining how complex systems work together, and he promises he's gotten better at the putting things back together stage since then.
Sign in to your XDA account
Summary
Generate a summary of this story
follow
Follow
followed
Followed
Like
Like
Thread
5
Log in
Here is a fact-based summary of the story contents:
Try something different:
Show me the facts
Explain it like I’m 5
Give me a lighthearted recap
At this point, the conversation shouldn't be about keeping your IoT devices off the internet, because the security aspects of that have been debated to bits, but about how to do so securely. The best option here is to put your smart home on its own VLAN, which solves a multitude of problems but leaves you with one glaring one. How exactly do you connect to your IoT devices to give them commands now that they're on another subnet, while keeping both networks safe? There's no one best option here, but there are several methods to connect to those untrustworthy IoT devices to make your smart home run as intended, and I'll go over them now.
Why are we putting IoT devices on their own VLAN?
Your smart home is not to be trusted
Your IoT devices deserve their own network segment. Okay, let me rephrase that. The rest of your network devices deserve for you to put IoT devices on their own VLAN or subnet. It's not just a security thing, although that's probably the primary consideration since most IoT devices have the security of an unlocked door, but there are other reasons. Think of how many IoT devices you have, then think about how much of your Wi-Fi airtime will be taken up by those chatty devices — especially security cameras, which love to send out broadcast packets to everything. So, now we've got our IoT devices segregated on their own VLAN with an associated SSID. Now what? How do we control those from our smartphones now that they're no longer on the same network or have internet access? What things do we need to connect securely without allowing those IoT devices to communicate and cause trouble? The first thing anyone would think of is some good firewall rules, and that's as good a place to start as any.
Time for some firewall rules
The tried and tested ways never fail
I've been using OPNsense for my home lab, and the combination of quality routing and stateful firewall means it's relatively simple to put IoT devices on a VLAN and then allow careful rules to let specific devices communicate with the home network. We have a few aims in mind. The IoT VLAN should be reachable from the main VLAN so that responses can be sent back for control purposes. There should be a wireless SSID on the IoT VLAN to which only IoT devices connect. The IoT VLAN should never be able to initiate traffic to the primary VLAN or reach the internet (although that one can be allowed when you want updates). Now, the exact wording of these rules will change depending on which firewall appliance you are using. How you approach them will change, as while most firewalls start with deny by default for inter-VLAN traffic, Unifi sets up access by default, so you'll be flipping your rules for that ecosystem. But the general ideas are the same:
LAN IN rule from IoT if we initiate from another VLAN
Block IoT LAN to main LAN
Allow trusted devices like Home Assistant OS through the firewall to the main LAN
Enable IGMP proxy
Along with those considerations, the number of open ports for hosts on the IoT VLAN should be limited. Setting static IPs for the IoT devices makes managing them easier and removes reliance on broadcast traffic. And don't forget to tag access and trunk ports as necessary for the VLANs, so they can't communicate with other network segments.
Or we could do it with a clever workaround
Home Assistant can talk over two interfaces, bridging the VLANs but not letting traffic past
There is one way of bridging those VLANs without actually bridging them, and that's using Home Assistant OS. Now there's a trick to getting this method working, and it involves running HAOS on a host that has two network interfaces to use. This could be running it in a VM with two virtual adapters, or two physical NICs if you have a suitably equipped PC or mini PC.
Then you set one interface to the IP range of the IoT VLAN, with only an IP address and no gateway set. Then you set the other network interface to the VLAN your home network uses, and set that as normal with a gateway. You might need to set the server_host variable in Home Assistant to the IP of the subnet on the user VLAN, which makes it listen for commands from that subnet and no other. Then you use Home Assistant from your phone or computer or wherever as normal. Having one foot on each subnet, so to speak, means Home Assistant can accept commands, and then send them out over the other network interface. You might also need to set manual static IP addresses for some devices in HAOS, but that's a small amount of setup, and means you don't have to worry about firewall rules because there's no path for the IoT VLAN to get onto an internet-connected subnet.
There's an even quicker way
I've written about using an old router for a dedicated IoT network before, but that includes having that router connected to the internet through a second router, so that things can get updates and Chromecasts or other internet-greedy devices can connect. You don't need to do that. I mean, you can, but the simplest way to get your IoT network away from your main network is to grab an old router, set the SSID so the IoT devices connect, and connect it to your Home Assistant server.
And here's the trick — don't plug the WAN port in. You can happily leave that router off the internet, and the IoT devices will work as intended. Well, maybe some will throw some grumpy messages in their individual apps, but you're using Home Assistant and that app is like a honey badger, it doesn't care. Your IoT devices will be controllable, and won't be touching your network or being able to dial home.
The best way to connect your IoT device on another VLAN depends on your network needs
IoT devices are inherently untrustworthy, even if they're a lot better than they used to be. However you want to keep them off your main network is fine, but it is advisable to do so. You can use firewall rules and a VLAN to keep them separated, or straddle two VLANs with Home Assistant, or avoid having to worry by using an internal only network that doesn't have internet access at all. Either way, keeping them off your network is good for security, airtime fairness, and reducing chatter that will interfere with other networking use.
Networking
iot
Follow
Followed
Like
Share
Facebook
X
LinkedIn
Reddit
Flipboard
Copy link
Email
Close
Thread
5
Sign in to your XDA account
We want to hear from you! Share your opinions in the thread below and remember to keep it respectful.
Reply / Post
Images
Attachment(s)
Please respect our community guidelines. No links, inappropriate language, or spam.
Your comment has not been saved
Send confirmation email
Sort by:
Popular
Oldest
Newest
Jamie
Jamie
Jamie
#XX458318
Member since 2025-02-08
0
Threads
56
Posts
Following
0
Stories
0
Topics
0
Authors
0
Users
Follow
Followed
0
Followers
View
So everyone who follows these rules, which are regurgitated frequently, apparently don't like the ability to have your security cameras available to you away from home. Most people have a Google home or Alexa, but you keep those from accessing the Internet?
I know, everyone runs home assistant with zero non local devices. Sure.
2025-09-05 19:47:55
Upvote
Downvote
Reply
Copy
Iron
Iron
Iron
#KB539052
Member since 2025-02-26
0
Threads
1
Posts
Following
0
Stories
0
Topics
0
Authors
0
Users
Follow
Followed
0
Followers
View
I must have missed something i n the article. I went from this "security cameras, which love to send out broadcast packets to everything." To this:" So, now we've got our IoT devices segregated on their own VLAN with an associated SSID." Umm did we?
2025-09-05 10:53:02
Upvote
Downvote
Reply
1
Copy
Jeff
Jeff
Jeff
#AJ881619
Member since 2024-01-21
0
Threads
2
Posts
Following
0
Stories
0
Topics
0
Authors
0
Users
Follow
Followed
0
Followers
View
Yeah, it provided a lot of “here is why” but no “here is how”. And just repeated the same stuff over and over
2025-09-05 11:34:16
Upvote
Downvote
Reply
Copy
The Lone
The Lone
The Lone
#EH054032
Member since 2024-07-05
0
Threads
2
Posts
Following
1
Stories
0
Topics
0
Authors
0
Users
Follow
Followed
0
Followers
View
Really bad idea to connect old EOL routers. There may be serious vulnerabilities that were never patched, the wifi is likely outdated and slow, and the eth might only be 100mbps.The *only* time you should even consider it, is if you have legacy devices that can't connect to modern wifi, such as a Wii(but since Nintendo turned off the servers long ago, it is pointless unless you've modded it)
2025-09-05 16:47:01
Upvote
Downvote
Reply
1
Copy
Paul
Paul
Paul
#HH247675
Member since 2025-06-14
0
Threads
6
Posts
Following
0
Stories
0
Topics
0
Authors
0
Users
Follow
Followed
0
Followers
View
My takeaways were: not connect the wan port so to keep it off the internet (then need to interface HA to it some way); IOT devices are typically not high bandwidth so the wifi or port does don't matter so much; good point about legacy devices needing 2.4 wifi,
I have some.
2025-09-06 05:59:34
Upvote
Downvote
Reply
Copy
Terms
Privacy
Feedback
Recommended
Sep 9, 2025
Forget the Switch 2, the Steam Deck is still the ultimate travel console
Sep 10, 2025
I replaced a dedicated NVR with Frigate and I'll never go back
Sep 10, 2025
I turned my mini PC into a console for my living room, and anyone can do it
Sep 9, 2025
Intel's crown as the best choice for gamers may be slipping as pros complain about its performance vs. AMD
Today's best deals
You can't go wrong with this 2TB external HDD if you're looking to grab extra storage for cheap
10 hours ago
If you're looking for a gaming laptop on a budget, this is it
13 hours ago
This brand-new, niche Steam game with 94% positive reviews is already 20% off
20 hours ago
See More
Trending Now
The Lenovo laptop we can't stop talking about is now $450 less
I tried using a FreeBSD distro that's meant to be run off a flash drive
If you're not a gamer, this is the PC you should build for 2026
Join Our Team
Our Audience
About Us
Press & Events
Contact Us
Follow Us
Advertising
Careers
Terms
Privacy
Policies
XDA is part of the
Valnet Publishing Group
Copyright © 2025 Valnet Inc.