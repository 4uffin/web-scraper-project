Install Windows 11 24H2 without TPM and Secure Boot requirements · GitHub
Skip to content
Search Gists
Search Gists
All gists
Back to GitHub
Sign in
Sign up
Sign in
Sign up
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.
Dismiss alert
Instantly share code, notes, and snippets.
djibe/windows11-24H2-tpm-secureboot.md
Last active
September 24, 2025 18:06
Show Gist options
Download ZIP
Star
31
(31)
You must be signed in to star a gist
Fork
2
(2)
You must be signed in to fork a gist
Embed
Embed
Embed this gist in your website.
Share
Copy sharable link for this gist.
Clone via HTTPS
Clone using the web URL.
Learn more about clone URLs
Clone this repository at &lt;script src=&quot;https://gist.github.com/djibe/87b6ae5157c309fb611b428445e9fce9.js&quot;&gt;&lt;/script&gt;
Save djibe/87b6ae5157c309fb611b428445e9fce9 to your computer and use it in GitHub Desktop.
Code
Revisions
20
Stars
30
Forks
2
Embed
Embed
Embed this gist in your website.
Share
Copy sharable link for this gist.
Clone via HTTPS
Clone using the web URL.
Learn more about clone URLs
Clone this repository at &lt;script src=&quot;https://gist.github.com/djibe/87b6ae5157c309fb611b428445e9fce9.js&quot;&gt;&lt;/script&gt;
Save djibe/87b6ae5157c309fb611b428445e9fce9 to your computer and use it in GitHub Desktop.
Download ZIP
Install Windows 11 24H2 without TPM and Secure Boot requirements
Raw
windows11-24H2-tpm-secureboot.md
Install Windows 11 24H2 without TPM and Secure Boot requirements
Create a Windows 11 ISO with Microsoft's Media Creation Tool
Install Setup Patchium and run it (or try latest Rufus version directly and patch from there)
Home tab: Select ISO, wait during processing
Go to Install > Uncheck Remove upgrade and Check Disable Windows 11 compatibility restrictions, click Apply
Optional: To install without a Microsoft account, go to Install OOBE tab. Click Integrate lumOOBE. This will break sysinstall.
Click on Create ISO button
Use Rufus or Ventoy (prefered) to run installation from a USB drive
Upgrade Windows 11
Download Windows 11 24H2.
Download MediaCreationTool.bat
Unzip archive and navigate to the /bypass11 folder.
Find the file Skip_TPM_Check_on_Dynamic_Update.cmd, select it, right click > Run as Administrator.
Then run a mounted Windows 11 installer ISO (See previous chapter or download from Microsoft)
Right click on ISO file > Mount. Then launch the installer (setup.exe) from the virtual Drive.
Or use Flyby11
Want to create a script to configure Windows ? Use WinScript
Copy link
ohlalayeah
commented
Dec 14, 2024
Hello.
How to do at Step 4 of upgrading Windows 11?
Sorry, something went wrong.
Uh oh!
There was an error while loading. Please reload this page.
Copy link
Author
djibe
commented
Dec 14, 2024
Once you unzip MediaCreationTool.bat, go to the /bypass11 folder.
Then right click on Skip_TPM_Check_on_Dynamic_Update.cmd and Run as admin.
Then launch the Win11 installer from a mounted ISO
Sorry, something went wrong.
Uh oh!
There was an error while loading. Please reload this page.
Copy link
AndrewBienhaus
commented
Jan 16, 2025
•
edited
Loading
Uh oh!
There was an error while loading. Please reload this page.
Hello - and thanks for the short and to the point explanation. :-)
Once installed fresh, using the no microsoft account method, it would seem that using sysprep to OOBE the machine, doesn't work,
Is there something somewhere, that once "ready to go", I can delete from the new install, so that sysprep will then run the whole OOBE experience, and I can use that to setup the user properly?
thanks much!
Andrew
PS: the why.... is that the OOBE is nice for a fresh machine for resale... or... to trigger the "we found your old install, would you like to restore settings from MS?" options that come up, particularly when you're replacing a failed hard drive on a customer machine. :-)
Sorry, something went wrong.
Uh oh!
There was an error while loading. Please reload this page.
Copy link
Author
djibe
commented
Jan 17, 2025
Hi @AndrewBienhaus.
Did you succeed ?
Did you use Microsoft ISO or it failed with lumOOBE ?
Sorry, something went wrong.
Uh oh!
There was an error while loading. Please reload this page.
Copy link
AndrewBienhaus
commented
Jan 17, 2025
•
edited
Loading
Uh oh!
There was an error while loading. Please reload this page.
Hello!
I both have and have not suceeded, depending on your perspective. :-)
I used the Microsoft ISO, with your instructions above, to make my USB stick, and have used it many times now, and was very happy that I didn't have to fight with the mandatory microsoft account, etc., and can go straight to 24h2.
So, I believe that is using the lumOOBE.
But, once installed, booted, running, updated, with all the drivers in place, and the system the way I like it... in the past before 24h2/lumOOBE... I would sysprep a system, so the user could then take their machine back, and walk through the steps on their own, with their own MS account.
I was giving them a "fresh" machine.
With your lumOOBE enabled, is there any way to remove that, once the system is running?
So that sysprep will work again?
Merci!
andrew
Sorry, something went wrong.
Uh oh!
There was an error while loading. Please reload this page.
Copy link
Author
djibe
commented
Jan 18, 2025
@AndrewBienhaus Do you succeed with this ? (use a translator ;)): https://www.it-connect.fr/effectuer-sysprep-windows-11-24h2/
Sorry, something went wrong.
Uh oh!
There was an error while loading. Please reload this page.
Copy link
AndrewBienhaus
commented
Jan 20, 2025
•
edited
Loading
Uh oh!
There was an error while loading. Please reload this page.
Hello - and thank you. :-)
I ran through those pages, and I can say, no, that doesn't work.
I do NOT use the generalize, as I do not want to remove SID, or drivers, or anything else - I just want to reset the user account to default, and ask all the "usual" questions.
At the point I am at, I have updated drivers, setup everything to the hardware, and I am NOT using it for HyperV - in fact, I have already activted the license successfully and everything.
It's a "ready to use" machine.
I just need to execute the standard OOBE "script".... so people can put in their own MS account.
but if I do the sysprep with oobe defaults, it just reboots back into what I assume is the lumOOBE.... same default account... no password... everything I picked from the usbstick win11 24h2 install that the instructions created. :-(
Yes, bitlocker is off.
I wonder if there are settings that lumOOBE introduced, that I can remove?
an answer file that can be delete or reset?
thank you!
Andrew
Sorry, something went wrong.
Uh oh!
There was an error while loading. Please reload this page.
Copy link
AndrewBienhaus
commented
Jan 20, 2025
for what it is worth - if it helped - I have 3 machines right now sitting in my "resale" pile, that are in this state.
if you want me to try messing with something, I am happy to experiment. :-)
Sorry, something went wrong.
Uh oh!
There was an error while loading. Please reload this page.
Copy link
Author
djibe
commented
Jan 21, 2025
Ni idea :(
Sorry, something went wrong.
Uh oh!
There was an error while loading. Please reload this page.
Copy link
AndrewBienhaus
commented
Jan 21, 2025
Ok, so for the search engines, here's what I have figured out as of today. :-)
My best google-fu, couldn't unlock the mystery of removing the lumOOBE, resetting it, disabling it, or anything like that.
No matter what I did, sysprep couldn't seem to reset the user experinece to the default oobe.
So - I made a new ISO, using the SetupPatchium tool above, and dumped to USB with Rufus, without the lumOOBE.
Everything worked perfectly.
System setup, just the way I wanted it, and then sysprepped it for a new customer. Tested. Working.
Interestingly enough, using Rufus 4.6.2208 - it actually asked me if I wanted to disable hardware checking, oobe, and a few other things, before it made the USB stick... so I guess Rufus has the same support now for 24h2?
So - I made another USB, using the earlier downloaded iso from MS of 24h2, the one I had fed to SetupPatchium, and selected those options at usb creation time, and it worked perfectly.
BOTH of them - go through the OOBE, but if you unplug the ethernet cable at the "setup for personal use" step, it then bypasses the MS account need, and you can plug the cable back in, one screen later.
The only thing SetupPatchium does do for you, is allow you to select the old pre-24h2 install menus & screens... but there's nothing wrong with the new ones that I have found yet. :-)
Sorry, something went wrong.
Uh oh!
There was an error while loading. Please reload this page.
Copy link
Author
djibe
commented
Jan 22, 2025
Great. Thx for sharing.
Maybe Rufus is enough for patching the official ISO then.
Enjoy
Sorry, something went wrong.
Uh oh!
There was an error while loading. Please reload this page.
Copy link
AndrewBienhaus
commented
Jan 22, 2025
.... maybe... but I want you to know I appreciate your original post!
My brain is storing 100,000 trivial things in the IT world... and I truly always appreciate someone saving me some work, and spelling it out!
:-)
Sorry, something went wrong.
Uh oh!
There was an error while loading. Please reload this page.
Copy link
Author
djibe
commented
Jan 22, 2025
Glad it helps.
You can share Gists too ;)
Sorry, something went wrong.
Uh oh!
There was an error while loading. Please reload this page.
Copy link
Author
djibe
commented
Jan 25, 2025
@AndrewBienhaus You should try this: https://github.com/CodingWonders/DISMTools
Sorry, something went wrong.
Uh oh!
There was an error while loading. Please reload this page.
Copy link
Author
djibe
commented
Jan 26, 2025
@AndrewBienhaus And UnattendedWinstall ;): https://github.com/memstechtips/UnattendedWinstall
Sorry, something went wrong.
Uh oh!
There was an error while loading. Please reload this page.
Copy link
AndrewBienhaus
commented
Jan 26, 2025
thank you!
DISM has always been a pain.... I will look into that for sure!
Sorry, something went wrong.
Uh oh!
There was an error while loading. Please reload this page.
Copy link
km1965
commented
May 30, 2025
Salut, moi j'ai lancé l'installation de Windows 11 24H2 avec
Fly by11 une fois l'installation terminée
et après le redémarrage qui a duré un bon moment j'ai eu tout simplement droit a
la réinitialisation de mon Windows 10 22H2 avec le message
Windows server
n'as pas pu s'installer nous avons réinitialise Windows 10.
S'il y'a une solution je suis preneur peut être je dois essayé avec Windows 22H2. Merci.
Sorry, something went wrong.
Uh oh!
There was an error while loading. Please reload this page.
Copy link
km1965
commented
May 30, 2025
Je veux dire essayé avec Windows 11 22H2 . Merci encore une fois.
Sorry, something went wrong.
Uh oh!
There was an error while loading. Please reload this page.
Copy link
km1965
commented
May 31, 2025
Bonjour, j'ai aussi essayé Windows 11 22H2 et
tout marchai bien
mais une fois redémarrer et à 48% de l'installation des mises à jour tout s'est arrêtés
et en fin retour à Windows 10 avec le message
ci joint. Merci.
Sorry, something went wrong.
Uh oh!
There was an error while loading. Please reload this page.
Copy link
km1965
commented
May 31, 2025
Merci d'avance, est se qu'il y a moyen de migrer
de Windows 10 22H2 vers Windows_10 IOT enterprise_ltsc_2021.
Sorry, something went wrong.
Uh oh!
There was an error while loading. Please reload this page.
Copy link
ji4ko0
commented
Jun 1, 2025
Thanks
Sorry, something went wrong.
Uh oh!
There was an error while loading. Please reload this page.
Copy link
Tataz2
commented
Jun 4, 2025
•
edited
Loading
Uh oh!
There was an error while loading. Please reload this page.
I tested Rufus. Installation by running setup.exe worked but automatic installation did not work without manually clicking.
setup.exe /ShowOOBE none /EULA accept /Compat IgnoreWarning /auto upgrade /DynamicUpdate Disable
I then tried Patchium but the installation stopped and Secure Boot was required.
Edit:
The problem was with a ISO image created by Media Creation Tool. When I downloaded the ISO file directly from https://www.microsoft.com/en-us/software-download/windows11 and used Patchium. Installation did not require
Secure Boot.
Edit:
Cannot update Windows 10 22H2 to Windows 11 24H2. I get complains about TPM 2.0 and Secure Boot. My first test was to update Win 11 23H2 to 24H2 and it was ok.
Edit:
I'm updating Windows 10 machines to Windows 11 23H2 which is supported till November 11, 2025.
Edit:
The issue with Rufus setup.exe is now fixed pbatard/rufus#2752
Sorry, something went wrong.
Uh oh!
There was an error while loading. Please reload this page.
Copy link
rusangarg
commented
Aug 3, 2025
i am stucked on secure boot
tpm is removed but secure boot is still there
Sorry, something went wrong.
Uh oh!
There was an error while loading. Please reload this page.
Copy link
Tataz2
commented
Sep 4, 2025
i am stucked on secure boot tpm is removed but secure boot is still there
I have made these changes before updating.
# These registry edition does not alone work for Windows 11 24H2. Not sure if needed anymore.
reg add "HKLM\SYSTEM\Setup\LabConfig" /v "BypassTPMCheck" /t REG_DWORD /d 1 /f
reg add "HKLM\SYSTEM\Setup\LabConfig" /v "BypassSecureBootCheck" /t REG_DWORD /d 1 /f
reg add "HKLM\SYSTEM\Setup\LabConfig" /v "BypassCPUCheck" /t REG_DWORD /d 1 /f
# This is what Rufus does
# https://github.com/pbatard/rufus/issues/2568#issuecomment-2387934171
# https://github.com/pbatard/rufus/blob/master/res/setup/setup.c#L109C102-L109C115
reg.exe delete "HKLM\SOFTWARE\Microsoft\Windows NT\CurrentVersion\AppCompatFlags\CompatMarkers" /f
reg.exe delete "HKLM\SOFTWARE\Microsoft\Windows NT\CurrentVersion\AppCompatFlags\Shared" /f
reg.exe delete "HKLM\SOFTWARE\Microsoft\Windows NT\CurrentVersion\AppCompatFlags\TargetVersionUpgradeExperienceIndicators" /f
reg.exe add "HKLM\SOFTWARE\Microsoft\Windows NT\CurrentVersion\AppCompatFlags\HwReqChk" /v "HwReqChkVars" /t REG_MULTI_SZ /s "," /d "SQ_SecureBootCapable=TRUE,SQ_SecureBootEnabled=TRUE,SQ_TpmVersion=2,SQ_RamMB=8192" /f
reg.exe add "HKLM\SYSTEM\Setup\MoSetup" /v "AllowUpgradesWithUnsupportedTPMOrCPU" /t REG_DWORD /d 1 /f
Sorry, something went wrong.
Uh oh!
There was an error while loading. Please reload this page.
Copy link
Author
djibe
commented
Sep 4, 2025
Hi @Tataz2 , Secure Boot is temporarly disabled from the UEFI settings, not from Windows.
Sorry, something went wrong.
Uh oh!
There was an error while loading. Please reload this page.
Sign up for free
to join this conversation on GitHub.
Already have an account?
Sign in to comment
Footer
© 2025 GitHub, Inc.
Footer navigation
Terms
Privacy
Security
Status
Community
Docs
Contact
Manage cookies
Do not share my personal information
You can’t perform that action at this time.